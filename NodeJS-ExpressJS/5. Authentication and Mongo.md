- fetch returns a promise and we can use the .then() syntax with it
```js
function getAnimalData(){
	fetch("https://fakerapi.it/api/v1/persons")
	.then(function(response){
		response.json()//convert response to json, returns a promise
		.then(function(data){
			setData(data.data);
			console.log(data.data);
		});
	});
}
```

in async await syntax
```js
async function getData(){
	const res=await fetch("https://fakerapi.it/api/v1/persons");
	const json=await res.json();
	console.log(json.data);
}
```
##### cryptography jargon
1. hashing - one way encryption
2. encryption - can be decrypted, requires a key, a secret
3. JWT - some encryption function that only works for json input, can be decoded by anyone but can be verified using only the password, technically its a digital signature
4. Local storage - 
		==1. localStorage.setItem(key, val);== 
		==2. localStorage.getItem(key);==

#### working with JWT
1. external dependency jsonwebtoken
> npm install jsonwebtoken
2. functionalities needed like creating jwt and verifying jwt are provided by this library
```js
const jwt=require("jsonwebtoken");
let token=jwt.sign(json,secret);

let decodedJson=jwt.verify(token,secret);
decodedJson.propertiesClaimed
```

3. if the data received if json we cant simply add it to the inner html of some tag, we first have to strigify it using the JSON library
```js
document.getElementById("userData").innerHTML = JSON.stringify(data);
```

### databases
in mongo land, database server == cluster
table == collection
database == set of collections
#### mongoose library is used to connect JS to mongoDB

following is the most basic mongoose connection to mongoDB
```js
const mongoose =require("mongoose");
mongoose.connect("connection string/database name");

const Cat=mongoose.model("Cat",{name:String});
const kitty=new Cat({name:"shailja"});
kitty.save().then(()=>console.log("meow"));

we can also create a cat record like so

await Cat.create({name:"shailja"});
```

if we have a model defined we can look for it via
```js
cat.findOne({name:"some name"});//can be any one of the properties of the record
```

example of a basic post endpoint that stores data in a database
```js
const mongoose = require("mongoose");
const express = require("express");
const jwt = require("jsonwebtoken");
const jwtPassword = "123456";
const app = express();
app.use(express.json());
mongoose.connect("mongodb+srv://chait8126:l65nO41jkpxU3HFo@cohortdb.g0dltte.mongodb.net/user_app");
  
const User = mongoose.model("User", { name: String, email: String, password: String });
 

app.post("/signup", async (req, res) => {
    const username = req.body.username;
    const password = req.body.password;
    const name = req.body.name;
  
    const existingUser = await User.findOne({ email: username });
    if (existingUser) {
        return res.status(400).send("username already exists");
    }
    const user = new User({
        name: name,
        email: username,
        password: password
    });
  
    await user.save();
    res.status(201).json({
        msg: "user created succesfully "
    })
});
  
app.listen(3000);
```

### authentication
we will create a middleware to handle authentication for us after signup and sign in

[[1. Node runtime]]